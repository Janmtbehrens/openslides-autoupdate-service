on:
  issues:
    types:
      - closed
      - opened
      - reopened

jobs:
  project-automation-calls:
    runs-on: ubuntu-latest
    secrets: inherit
    steps:
      name: Issue closed
      if: ${{ github.event.action == "closed" }}
      uses: Janmtbehrens/OpenSlides/dev/actions/project-automation@reusable-github-actions
      with:
        resource_node_id: ${{ github.event.issue.node_id }}
        status_value: "Done"
        gh_app_ID: ${{ secrets.AUTOMATION_APP_ID }}
        gh_app_installation_ID: ${{ secrets.AUTOMATION_APP_INSTALLATION_ID }}
        gh_app_secret_key: ${{ secrets.AUTOMATION_APP_PRIVATE_KEY }}

      
      name: Issue opened
      if: ${{ github.event.action == "opened" || github.event.action == "reopened" }}
      uses: Janmtbehrens/OpenSlides/dev/actions/project-automation@reusable-github-actions
      with:
        resource_node_id: ${{ github.event.issue.node_id }}
        status_value: "Backlog"
        gh_app_ID: ${{ secrets.AUTOMATION_APP_ID }}
        gh_app_installation_ID: ${{ secrets.AUTOMATION_APP_INSTALLATION_ID }}
        gh_app_secret_key: ${{ secrets.AUTOMATION_APP_PRIVATE_KEY }}